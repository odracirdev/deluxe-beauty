---
import { Icon } from 'astro-icon/components'

const siteURL = import.meta.env.DEV ? '' : import.meta.env.SITE

const slugs = [
  { text: 'Inicio', slug: `${siteURL}/`, icon: 'home' },
  { text: 'Servicios', slug: `${siteURL}/servicios`, icon: 'services' },
  { text: 'Contacto', slug: `${siteURL}#`, icon: 'whatsapp' }
]

function isActiveSlug(slug: string) {
  const normalizedPath = Astro.url.pathname.replace(`${siteURL}/`, '/');
  const normalizedSlug = slug.replace(`${siteURL}/`, '/');

  return (
    normalizedPath === normalizedSlug ||
    (normalizedSlug !== '/' && normalizedPath.startsWith(normalizedSlug))
  );
}
---

<header class="header">
  <nav class="navbar container">
    <a href="/" class="logo"
      ><img src="/images/logo-black.avif" alt="Deluxe Beauty" /></a
    >
    <div class="menu">
      <ul class="menu-list">
        {slugs.map(({text, slug, icon})=>(<li class="menu-item">
          <a href={slug} class:list={["menu-link", {"is-active":isActiveSlug(slug)}]}>
            <Icon name={icon} size={32} />
            <span class="menu-name">{text}</span>
          </a>
        </li>))}
      </ul>
    </div>
  </nav>
</header>

<style>
  ul {
    list-style: none;
    list-style-type: none;
  }

  .header {
    background-color: var(--white);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 4.5rem;
    z-index: 100;

    & .navbar {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
      margin: 0 auto;

      & img {
        max-width: 10rem;
      }
    }

    & .menu {
      position: fixed;
      left: 0;
      bottom: 0;
      display: grid;
      align-content: center;
      width: 100%;
      height: 4.5rem;
      padding: 0 1rem;
      border-top-left-radius: 1.5rem;
      border-top-right-radius: 1.5rem;
      box-shadow: var(--shadow-medium);
      background-color: var(--white);

      & .menu-list {
        display: flex;
        align-items: center;
        justify-content: space-around;

        & .menu-link {
		      display: flex;
		      flex-direction: column;
          align-items: center;
          justify-content: center;
          border: none;
          outline: none;
          color: var(--color-black);

          &.is-active {
			      color: var(--primary-color);
			      transition: all 0.35s ease-in-out;
		      }

        & .menu-name {
          font-weight: 700;
        }

         &:hover {
				  color: var(--primary-color);
				  transition: color 0.35s ease-in-out;
			  } 
      }
    }
  }
</style>